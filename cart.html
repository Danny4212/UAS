<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="Enuma.css" />
    <title>Cart Feature</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />

    <?php
        session_start();

        // Initialize cart if not set
        if (!isset($_SESSION['cart'])) {
            $_SESSION['cart'] = [];
        }

        // Handle Add to Cart
        if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['add_to_cart'])) {
            $productName = $_POST['product_name'];
            $productPrice = $_POST['product_price'];

            // Add product to cart session
            $_SESSION['cart'][] = [
                'name' =>
    $productName, 'price' => $productPrice ]; } ?>
  </head>
  <body>
    <!-- HEADER -->
    <header>
      <div class="nav">
        <div class="logo">Enuma<span>Camera</span></div>
        <div class="navbar">
          <a href="index.php#home">Home</a>
          <a href="index.php#camera">Products</a>
          <a href="index.php#about">About</a>
          <a href="#">Contact</a>
        </div>
        <i id="search-icon" class="fa fa-search"></i>
        <!-- Cart Icon -->
        <i id="cart-icon" class="fa fa-shopping-cart"></i>
      </div>
    </header>

    <!-- CART DISPLAY -->
    <div class="cart-panel">
      <h2>Cart</h2>
      <ul class="cart-items">
        <?php foreach ($_SESSION['cart'] as $item): ?>
        <li><?php echo htmlspecialchars($item['name']) . " - $" . htmlspecialchars($item['price']); ?></li>
        <?php endforeach; ?>
      </ul>
    </div>

    <!-- PRODUCTS SECTION -->
    <section class="camera">
      <div class="camera-container">
        <div class="box">
          <img src="FX3.png" alt="Sony FX-3" />
          <h2>Sony FX-3</h2>
          <form method="post">
            <input type="hidden" name="product_name" value="Sony FX-3" />
            <input type="hidden" name="product_price" value="3000" />
            <button type="submit" name="add_to_cart">Add to Cart</button>
          </form>
        </div>

        <div class="box">
          <img src="Lens.png" alt="Sony Lens" />
          <h2>Sony Lens</h2>
          <form method="post">
            <input type="hidden" name="product_name" value="Sony Lens" />
            <input type="hidden" name="product_price" value="1500" />
            <button type="submit" name="add_to_cart">Add to Cart</button>
          </form>
        </div>
      </div>
    </section>

    <script>
      // Event Listener for Cart Icon
      document.getElementById('cart-icon').addEventListener('click', () => {
        const cartPanel = document.querySelector('.cart-panel');
        cartPanel.style.display = cartPanel.style.display === 'block' ? 'none' : 'block';
      });
    </script>
  </body>
</html>
